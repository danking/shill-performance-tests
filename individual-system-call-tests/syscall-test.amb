#lang shill/ambient

require shill/native;
require "syscall-test.cap";

val wallet = create-wallet();
populate-native-wallet(wallet
                      ,open-dir("/")
                      ,"/usr/bin:/bin:/home/danking/tests/individual-system-call-tests"
                      ,"/libexec:/lib:/usr/lib"
                      ,pipe-factory
                      ,lookups = [open-dir("/home"), open-dir("/dev")]);

syscall-test( wallet
            , stdout
            , open-dir("/")
            , cwd
            , open-dir("/home/danking/tests/individual-system-call-tests")
            , open-file("/lib/libc.so.7")
            );
